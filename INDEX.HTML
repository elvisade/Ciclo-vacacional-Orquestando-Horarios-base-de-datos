<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Buscador de Estudiantes</title>

<style>
body { font-family: Arial, sans-serif; }
input { width: 100%; padding: 10px; margin-bottom: 10px; }
table { width: 100%; border-collapse: collapse; }
th, td { border: 1px solid #ccc; padding: 8px; }
th { background: #f2f2f2; }
</style>
</head>

<body>

<h2>Buscador de Estudiantes</h2>

<input type="text" id="buscador" placeholder="Buscar por DNI, nombre o apellido...">

<table>
<thead>
<tr>
<th>DNI</th>
<th>Nombres</th>
<th>Apellidos</th>
<th>Horario</th>
<th>Educador Musical</th>
<th>Grupo</th>
<th>WhatsApp</th>
</tr>
</thead>
<tbody id="tabla"></tbody>
</table>

<script>
let estudiantes = [];

fetch("datos.csv")
.then(res => res.text())
.then(texto => {
  const lineas = texto.trim().split("\n");
  const encabezados = lineas[0].split(",");

  for (let i = 1; i < lineas.length; i++) {
    const valores = lineas[i].split(",");
    let obj = {};
    encabezados.forEach((h, j) => obj[h.trim()] = valores[j]?.trim());
    estudiantes.push(obj);
  }

  render(estudiantes);
});

function render(lista) {
  const tabla = document.getElementById("tabla");
  tabla.innerHTML = "";

  lista.forEach(e => {
    const link = e["Link de Grupo Whatsapp"]
      ? `<a href="${e["Link de Grupo Whatsapp"]}" target="_blank">Abrir</a>`
      : "No disponible";

    tabla.innerHTML += `
    <tr>
      <td>${e["DNI"]}</td>
      <td>${e["Nombres del estudiante"]}</td>
      <td>${e["Apellidos del estudiante"]}</td>
      <td>${e["HORARIO"]}</td>
      <td>${e["EDUCADOR MUSICAL"]}</td>
      <td>${e["GRUPO"]}</td>
      <td>${link}</td>
    </tr>`;
  });
}

document.getElementById("buscador").addEventListener("input", e => {
  const t = e.target.value.toLowerCase();
  render(estudiantes.filter(est =>
    Object.values(est).join(" ").toLowerCase().includes(t)
  ));
});
</script>

</body>
</html>
